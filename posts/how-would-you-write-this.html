<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"></meta>
    <meta content="width=device-width, initial-scale=1" name="viewport"></meta>
    <link href="/ThorntonMelon.css" rel="stylesheet"></link>
  </head>
  <body>
    <header>
      <h1>Tool of Thought</h1>
      <h2>APL for the Practical Man</h2>
      <nav>
        <a href="/">Home</a>
        <a href="/posts">Posts</a>
        <a href="/projects">Projects</a>
        <a href="/donts">Don'ts</a>
        <a href="/links">Links</a>
        <a href="/about">About</a>
      </nav>
    </header>
    <main>
      <article>
        <header>
          <h1>
            <a href="/posts/how-would-you-write-this">How Would You Write
            This?</a>
          </h1>
          <h2>March 5, 2023</h2>
        </header>
        <p>This question was recently posed on the <a href="https://chat.stackexchange.com/rooms/52405/the-apl-orchard/">APL Orchard</a> regarding how the following logic should or  could be expressed given that an <code>:OrIf</code> cannot be mixed with an <code>:AndIf</code>: </p>
        <pre><code>       :If 'Linux'≡(⊃# ⎕WG'APLVersion')~'-64'
       :AndIf ~0∊⍴⎕CMD'which git'
       :OrIf 'Windows'≡(⊃# ⎕WG'APLVersion')~'-64'
       :AndIf ~0∊⍴⎕CMD'where git'
</code></pre>
        <p>Leaving aside the <code>:AndIf</code>/<code>:OrIf</code> issue, this style violates the prime  <a href="/donts">Dyalog Don't</a> directive <em>Don't use control structures</em>, especially in such a situation or context.</p>
        <p>A response was immediately forthcoming, cutting the Gordian knot:</p>
        <pre><code>:If ~0∊⎕CMD' git',⍨⊃'which' 'where'⌽⍨'Windows'≡'-64'~⍨⊃# ⎕WG'APLVersion'
</code></pre>
        <p>This is a much more APL-style solution as it removes all the essential control structures, and is also better from a general programming perspective as it removes all of the duplicated code. These two improvements are directly related; removing the control structures requires the  removal of the duplicated code. This is precisely why control structures should be avoided.  But dangling this much code off the end of an <code>:If</code> statement, or preceeding a dfn guard, still leaves a lot to be desired, and violates another <em>Dyalog Don't</em>. </p>
        <p>Why not name a function? How much easier on  the reader's eyes and brain is it to see:</p>
        <pre><code>     :If IsInstalled 'git' 
</code></pre>
        <p>or </p>
        <pre><code>     ~IsInstalled 'git':0 
</code></pre>
        <p>There is no need for a comment, either outside the function or inside the function. The name of the function and its literal argument says it all. Furthermore, by extracting <code>'git'</code> as an argument, we have a function that might be useful in many other places, and would make a good candiate for an item in a utility package. Even if the function is hard-coded in the application, and is only used once, the simple act of encapsulating and naming the code is very useful.</p>
        <p>Once we have a well-named function, we might even say "who cares how the code is written"!   The fact that the code is in a function, that the function has a good name and a singular purpose, that the arguments are well-designed-- all of these things are more important than the style or technique of the code inside the function itself. It would be better to have the function named and then coded with all sorts of control structures than to have the naked APL-style solution following the :If statement.</p>
        <p>The benefits of an application composed of small, well-named and designed functions cannot be overstated. </p>
      </article>
    </main>
    <footer>
      <p>Copyright 2023 Paul S. Mansour</p>
    </footer>
  </body>
</html>
