<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"></meta><meta content="width=device-width, initial-scale=1" name="viewport"></meta><link href="/ThorntonMelon.css" rel="stylesheet"></link></head><body><header><h1>Tool of Thought</h1><h2>APL for the Practical Man</h2><h3>"Don't chase tech. Chase fun." - Gunpei Yokoi</h3><nav><a href="/">Home</a><a href="/posts">Posts</a><a href="/projects">Projects</a><a href="/donts">Don'ts</a><a href="/links">Links</a><a href="/about">About</a></nav></header><main><article><header><h1><a href="/posts/trains">Trains</a></h1><h2>July 8, 2022</h2></header><p>In a <a href="/posts/leetcode-571">previous post</a> we computed the median on grouped data by replicating it and applying a <code>median</code> function that works on ungrouped data. I assumed that there  was a way to compute the median without replicating the data, and sure enough, <a href="http://tamstat.com">Brother Statistician Steve</a> sent me this old (pre-interval index) solution (slightly modified for explanatory purposes):</p><pre><code>median1←{
    ⍝ ⍺ ←→ Frequency
    ⍝ ⍵ ←→ Values
    c←(+\⍺)÷+/⍺
    i←(0.5≤c)⍳1
    ⍵[i+0,0.5∊c]+.÷2
}
</code></pre><p>Looking at: </p><pre><code>      (+\⍺)÷+/⍺
</code></pre><p>the function train jumps right off the monitor:  </p><pre><code>      +\÷+/
</code></pre><p>As an aside, trains come in two styles. First is the <strong>Orange Blossom Special</strong> style, of which this is a prime example. These trains are elegant, a great pleasure to ride. Then we have the <strong>Amtrak</strong> style, which is a mess of tacks, jots, and tildes diaeresis. (I'm guessing that is the proper plural form, and not tilde diaereses.)  These trains are all glue and duct tape. A terrible travel experience. One is better off taking the dfn.  </p><p>But the point of this post is that it never occurred to me that trains work in FlipDB. And why wouldn't they?! In the FlipDB session: </p><pre><code>      (sum running / sum) 7 1 3 1
┌────────────┐
↓0.5833333333│
│0.6666666667│
│0.9166666667│
│1           │
└Float───────┘
</code></pre><p>So we can use trains anywhere, in a where clause, a select clause, a having clause, anywhere a FlipDB expression is called for.</p><p>Ten minutes after Steve sent over the solution above he sent a new one using interval index, and catching the train too.  </p></article></main><footer><p>Copyright 2021-2025 Paul S. Mansour</p></footer></body></html>
